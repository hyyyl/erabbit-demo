"use strict";(self["webpackChunkerabbit_client_pc"]=self["webpackChunkerabbit_client_pc"]||[]).push([[565],{9715:function(e,t,a){a.d(t,{Z:function(){return m}});var s=a(3396),r=a(7139);const o=["src"],i={class:"name ellipsis"},n={class:"desc ellipsis"},l={class:"price"};function d(e,t,a,d,c,u){const p=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.j4)(p,{to:`/product/${a.goods.id}`,class:"goods-item"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:a.goods.picture,alt:""},null,8,o),(0,s._)("p",i,(0,r.zw)(a.goods.name),1),(0,s._)("p",n,(0,r.zw)(a.goods.desc),1),(0,s._)("p",l,"¥"+(0,r.zw)(a.goods.price),1)])),_:1},8,["to"])}var c={name:"GoodsItem",props:{goods:{type:Object,default:()=>{}}}},u=a(89);const p=(0,u.Z)(c,[["render",d],["__scopeId","data-v-26912173"]]);var m=p},8565:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var s=a(3396);const r={class:"sub-category"},o={class:"container"},i={class:"goods-list"};function n(e,t,a,n,l,d){const c=(0,s.up)("sub-bread"),u=(0,s.up)("sub-filter"),p=(0,s.up)("sub-sort"),m=(0,s.up)("goods-item"),g=(0,s.up)("xtx-infinite-loading");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s.Wm)(c),(0,s.Wm)(u,{onFilterChange:n.filterChange},null,8,["onFilterChange"]),(0,s._)("div",i,[(0,s.Wm)(p,{onSortChange:n.sortChange},null,8,["onSortChange"]),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.goodsList,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s.Wm)(m,{goods:e},null,8,["goods"])])))),128))]),(0,s.Wm)(g,{loading:n.loading,finished:n.finished,onLoadData:n.loadData},null,8,["loading","finished","onLoadData"])])])])}var l=a(7139),d=a(3862);const c=(0,s.Uk)("首页");function u(e,t,a,r,o,i){const n=(0,s.up)("xtx-bread-item"),u=(0,s.up)("xtx-bread");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n,{to:"/"},{default:(0,s.w5)((()=>[c])),_:1}),r.category.top?((0,s.wg)(),(0,s.j4)(n,{key:0,to:`/category/${r.category.top.id}`},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(r.category.top.name),1)])),_:1},8,["to"])):(0,s.kq)("",!0),(0,s.Wm)(d.uT,{name:"fade-bread",mode:"out-in"},{default:(0,s.w5)((()=>[r.category.sub?((0,s.wg)(),(0,s.j4)(n,{key:r.category.sub.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(r.category.sub.name),1)])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})}var p=a(9242),m=a(65),g=a(2483),h={name:"SubBread",components:{XtxBreadItem:p["default"]},setup(){const e=(0,m.oR)(),t=(0,g.yj)(),a=(0,s.Fl)((()=>{for(let a=0;a<e.state.category.list.length;a++){const s=e.state.category.list[a];let r=null;if(s.children&&(r=s.children.find((e=>e.id===t.params.id))),r)return{top:{id:s.id,name:s.name},sub:{id:r.id,name:r.name}}}return{}}));return{category:a}}},v=a(89);const f=(0,v.Z)(h,[["render",u]]);var _=f;const b=e=>((0,s.dD)("data-v-8b93149c"),e=e(),(0,s.Cn)(),e),y={key:0,class:"sub-filter"},w={class:"item"},k=b((()=>(0,s._)("div",{class:"head"},"品牌：",-1))),C={class:"body"},x=["onClick"],D={class:"head"},P={class:"body"},S=["onClick"],j={key:1,class:"sub-filter"};function F(e,t,a,r,o,i){const n=(0,s.up)("xtx-skeleton");return!r.filterLoading&&r.filterData?((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("div",w,[k,(0,s._)("div",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filterData.brands,(e=>((0,s.wg)(),(0,s.iD)("a",{href:"javascript:;",class:(0,l.C_)({active:e.id===r.filterData.brands.selectedBrand}),onClick:t=>r.changeBrand(e.id),key:e.id},(0,l.zw)(e.name),11,x)))),128))])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filterData.saleProperties,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"item",key:e.id},[(0,s._)("div",D,(0,l.zw)(e.name)+":",1),(0,s._)("div",P,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.properties,(t=>((0,s.wg)(),(0,s.iD)("a",{href:"javascript:;",class:(0,l.C_)(["ellipsis",{active:t.id===e.selectedProperty}]),onClick:a=>r.changeSaleProperty(e,t.id),key:t.id},(0,l.zw)(t.name),11,S)))),128))])])))),128))])):((0,s.wg)(),(0,s.iD)("div",j,[(0,s.Wm)(n,{class:"item",width:"800px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"800px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"600px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"600px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"600px",height:"40px"})]))}var W=a(4870),B=a(588),z=a(3281),H={name:"SubFilter",components:{XtxSkeleton:z["default"]},setup(e,{emit:t}){const a=(0,W.iH)(null),r=(0,W.iH)(!1),o=(0,g.yj)();(0,s.YP)((()=>o.params.id),(e=>{r.value=!0,e&&`/category/sub/${e}`===o.path&&(0,B.qu)(o.params.id).then((e=>{e.result.brands.unshift({id:null,name:"全部"}),e.result.brands.selectedBrand=null,e.result.saleProperties.forEach((e=>{e.selectedProperty=null,e.properties.unshift({id:null,name:"全部"})})),a.value=e.result,r.value=!1}))}),{immediate:!0});const i=()=>{const e={},t=[];return e.brandId=a.value.brands.selectedBrand,a.value.saleProperties.forEach((e=>{const a=e.properties.find((t=>t.id===e.selectedProperty));a&&a.id&&t.push({groupName:e.name,propertyName:a.name})})),t.length&&(e.attrs=t),e},n=e=>{a.value.brands.selectedBrand!==e&&(a.value.brands.selectedBrand=e,t("filterChange",i()))},l=(e,a)=>{e.selectedProperty!==a&&(e.selectedProperty=a,t("filterChange",i()))};return{filterData:a,filterLoading:r,changeBrand:n,changeSaleProperty:l}}};const I=(0,v.Z)(H,[["render",F],["__scopeId","data-v-8b93149c"]]);var M=I;const U={class:"sub-sort"},L={class:"sort"},Z=(0,s.Uk)(" 价格排序 "),N={class:"check"},V=(0,s.Uk)("仅显示有货商品"),Y=(0,s.Uk)("仅显示特惠商品");function q(e,t,a,r,o,i){const n=(0,s.up)("xtx-checkbox");return(0,s.wg)(),(0,s.iD)("div",U,[(0,s._)("div",L,[(0,s._)("a",{class:(0,l.C_)({active:""===r.sortParams.sortField}),onClick:t[0]||(t[0]=e=>r.changeSort("")),href:"javascript:;"},"默认排序",2),(0,s._)("a",{class:(0,l.C_)({active:"publishTime"===r.sortParams.sortField}),onClick:t[1]||(t[1]=e=>r.changeSort("publishTime")),href:"javascript:;"},"最新商品",2),(0,s._)("a",{class:(0,l.C_)({active:"orderNum"===r.sortParams.sortField}),onClick:t[2]||(t[2]=e=>r.changeSort("orderNum")),href:"javascript:;"},"最高人气",2),(0,s._)("a",{class:(0,l.C_)({active:"evaluateNum"===r.sortParams.sortField}),onClick:t[3]||(t[3]=e=>r.changeSort("evaluateNum")),href:"javascript:;"},"评论最多",2),(0,s._)("a",{onClick:t[4]||(t[4]=e=>r.changeSort("price")),href:"javascript:;"},[Z,(0,s._)("i",{class:(0,l.C_)(["arrow up",{active:"price"===r.sortParams.sortField&&"asc"===r.sortParams.sortMethod}])},null,2),(0,s._)("i",{class:(0,l.C_)(["arrow down",{active:"price"===r.sortParams.sortField&&"desc"===r.sortParams.sortMethod}])},null,2)])]),(0,s._)("div",N,[(0,s.Wm)(n,{modelValue:r.sortParams.inventory,"onUpdate:modelValue":t[5]||(t[5]=e=>r.sortParams.inventory=e)},{default:(0,s.w5)((()=>[V])),_:1},8,["modelValue"]),(0,s.Wm)(n,{modelValue:r.sortParams.onlyDiscount,"onUpdate:modelValue":t[6]||(t[6]=e=>r.sortParams.onlyDiscount=e)},{default:(0,s.w5)((()=>[Y])),_:1},8,["modelValue"])])])}var K=a(8754),$={name:"SubSort",components:{XtxCheckbox:K["default"]},setup(e,{emit:t}){const a=(0,W.qj)({inventory:!1,onlyDiscount:!1,sortField:"",sortMethod:""}),s=e=>{if("price"===e)a.sortField=e,""===a.sortMethod||"asc"===a.sortMethod?a.sortMethod="desc":a.sortMethod="asc";else{if(a.sortField===e)return;a.sortField=e,a.sortMethod=""}t("sortChange",a)};return{sortParams:a,changeSort:s}}};const T=(0,v.Z)($,[["render",q],["__scopeId","data-v-796913b9"]]);var X=T,E=a(9715),G={name:"SubCategory",components:{SubBread:_,SubFilter:M,SubSort:X,GoodsItem:E.Z},setup(){const e=(0,g.yj)();let t={page:1,pageSize:25};const a=(0,W.iH)([]),r=(0,W.iH)(!1),o=(0,W.iH)(!1),i=()=>{t.categoryId=e.params.id,(0,B.Sm)(t).then((({result:e})=>{r.value=!0,e.items.length?(a.value.push(...e.items),t.page++):o.value=!0,r.value=!1}))};(0,s.YP)((()=>e.params.id),(s=>{s&&`/category/sub.${s}`===e.path&&(o.value=!1,t.page=1,a.value=[])}),{immediate:!0});const n=e=>{t={...t,...e},o.value=!1,t.page=1,a.value=[]},l=e=>{t={...t,...e},o.value=!1,t.page=1,a.value=[]};return{finished:o,loading:r,loadData:i,goodsList:a,filterChange:n,sortChange:l}}};const R=(0,v.Z)(G,[["render",n],["__scopeId","data-v-24cde1f8"]]);var O=R}}]);
//# sourceMappingURL=565.dba11762.js.map