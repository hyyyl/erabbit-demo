{"version":3,"file":"js/565.dba11762.js","mappings":"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","sources":["webpack://erabbit-client-pc/./src/views/category/component/goods-item.vue","webpack://erabbit-client-pc/./src/views/category/component/goods-item.vue?aa0a","webpack://erabbit-client-pc/./src/views/category/sub.vue","webpack://erabbit-client-pc/./src/views/category/component/sub-bread.vue","webpack://erabbit-client-pc/./src/views/category/component/sub-bread.vue?af8d","webpack://erabbit-client-pc/./src/views/category/component/sub-filter.vue","webpack://erabbit-client-pc/./src/views/category/component/sub-filter.vue?ce59","webpack://erabbit-client-pc/./src/views/category/component/sub-sort.vue","webpack://erabbit-client-pc/./src/views/category/component/sub-sort.vue?64a1","webpack://erabbit-client-pc/./src/views/category/sub.vue?7bf5"],"sourcesContent":["<template>\r\n  <RouterLink :to=\"`/product/${goods.id}`\" class='goods-item'>\r\n    <img :src=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{goods.name}}</p>\r\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\r\n    <p class=\"price\">&yen;{{goods.price}}</p>\r\n  </RouterLink>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-item {\r\n  display: block;\r\n  width: 220px;\r\n  padding: 20px 30px;\r\n  text-align: center;\r\n  .hoverShadow();\r\n  img {\r\n    width: 160px;\r\n    height: 160px;\r\n  }\r\n  p {\r\n    padding-top: 10px;\r\n  }\r\n  .name {\r\n    font-size: 16px;\r\n  }\r\n  .desc {\r\n    color: #999;\r\n    height: 29px;\r\n  }\r\n  .price {\r\n    color: @priceColor;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./goods-item.vue?vue&type=template&id=26912173&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=26912173&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\Web\\\\Demo\\\\erabbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-26912173\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"sub-category\">\r\n    <div class=\"container\">\r\n    <!-- 面包屑 -->\r\n      <sub-bread></sub-bread>\r\n    <!-- 筛选区 -->\r\n      <sub-filter @filterChange=\"filterChange\"></sub-filter>\r\n    <!-- 商品面板(排序+列表) -->\r\n      <div class=\"goods-list\">\r\n        <!-- 排序 -->\r\n        <sub-sort @sortChange=\"sortChange\"></sub-sort>\r\n        <!-- 列表 -->\r\n        <ul>\r\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\r\n            <goods-item :goods=\"goods\"></goods-item>\r\n          </li>\r\n        </ul>\r\n        <!-- 无限加载 -->\r\n        <xtx-infinite-loading :loading=\"loading\" :finished=\"finished\" @loadData=\"loadData\"></xtx-infinite-loading>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport SubBread from '@/views/category/component/sub-bread'\r\nimport SubFilter from '@/views/category/component/sub-filter'\r\nimport { ref, watch } from 'vue'\r\nimport SubSort from '@/views/category/component/sub-sort'\r\nimport GoodsItem from '@/views/category/component/goods-item'\r\nimport { findSubCategoryGoods } from '@/api/category'\r\nimport { useRoute } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'SubCategory',\r\n  components: {\r\n    SubBread,\r\n    SubFilter,\r\n    SubSort,\r\n    GoodsItem\r\n  },\r\n  setup () {\r\n    const route = useRoute()\r\n    // 请求参数\r\n    let params = {\r\n      page: 1,\r\n      pageSize: 25\r\n    }\r\n    // 商品列表\r\n    const goodsList = ref([])\r\n    // 加载数据\r\n    const loading = ref(false)\r\n    // 已全部加载\r\n    const finished = ref(false)\r\n    // 获取数据\r\n    const loadData = () => {\r\n      params.categoryId = route.params.id\r\n      findSubCategoryGoods(params).then(({ result }) => {\r\n        loading.value = true\r\n        if (result.items.length) {\r\n          goodsList.value.push(...result.items)\r\n          params.page++\r\n        } else {\r\n          finished.value = true\r\n        }\r\n        loading.value = false\r\n      })\r\n    }\r\n    // 监听，如果二级分类id改变就重新加载数据\r\n    watch(() => route.params.id, (newVal) => {\r\n      if (newVal && `/category/sub.${newVal}` === route.path) {\r\n        finished.value = false\r\n        params.page = 1\r\n        // 清空列表，会回到顶部进入可视区然后会自动加载数据\r\n        goodsList.value = []\r\n      }\r\n    }, { immediate: true })\r\n    // 筛选区改变\r\n    const filterChange = (filterParams) => {\r\n      params = { ...params, ...filterParams }\r\n      finished.value = false\r\n      params.page = 1\r\n      // 清空列表，会回到顶部进入可视区然后会自动加载数据\r\n      goodsList.value = []\r\n    }\r\n\r\n    // 排序区改变\r\n    const sortChange = (sortParams) => {\r\n      params = { ...params, ...sortParams }\r\n      finished.value = false\r\n      params.page = 1\r\n      // 清空列表，会回到顶部进入可视区然后会自动加载数据\r\n      goodsList.value = []\r\n    }\r\n    return { finished, loading, loadData, goodsList, filterChange, sortChange }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.goods-list {\r\n  background: #fff;\r\n  padding: 0 25px;\r\n  margin-top: 25px;\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 0 5px;\r\n    li {\r\n      margin-right: 20px;\r\n      margin-bottom: 20px;\r\n      &:nth-child(5n) {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <xtx-bread>\r\n    <xtx-bread-item to=\"/\">首页</xtx-bread-item>\r\n    <xtx-bread-item v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{category.top.name}}</xtx-bread-item>\r\n    <transition name=\"fade-bread\" mode=\"out-in\">\r\n      <xtx-bread-item v-if=\"category.sub\" :key=\"category.sub.id\">{{category.sub.name}}</xtx-bread-item>\r\n    </transition>\r\n  </xtx-bread>\r\n</template>\r\n<script>\r\n\r\nimport XtxBreadItem from '@/components/library/xtx-bread-item'\r\nimport { computed } from 'vue'\r\n\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\n\r\nexport default {\r\n  name: 'SubBread',\r\n  components: {\r\n    XtxBreadItem\r\n  },\r\n  setup () {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const category = computed(() => {\r\n      for (let i = 0; i < store.state.category.list.length; i++) {\r\n        const top = store.state.category.list[i]\r\n        let sub = null\r\n        if (top.children) sub = top.children.find(item => item.id === route.params.id)\r\n        if (sub) {\r\n          return {\r\n            top: {\r\n              id: top.id,\r\n              name: top.name\r\n            },\r\n            sub: {\r\n              id: sub.id,\r\n              name: sub.name\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return {}\r\n    })\r\n\r\n    return { category }\r\n  }\r\n\r\n}\r\n</script>\r\n<style scoped lang=\"less\"></style>\r\n","import { render } from \"./sub-bread.vue?vue&type=template&id=d54e9786\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Web\\\\Demo\\\\erabbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <!-- 筛选区 -->\r\n  <div class=\"sub-filter\" v-if=\"!filterLoading && filterData\">\r\n    <div class=\"item\">\r\n      <div class=\"head\">品牌：</div>\r\n      <div class=\"body\">\r\n        <a href=\"javascript:;\" :class=\"{active : brand.id === filterData.brands.selectedBrand}\" @click=\"changeBrand(brand.id)\" v-for=\"brand in filterData.brands\" :key=\"brand.id\">{{ brand.name }}</a>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"item\" v-for=\"sp in filterData.saleProperties\" :key=\"sp.id\">\r\n      <div class=\"head\">{{ sp.name}}:</div>\r\n      <div class=\"body\">\r\n        <a href=\"javascript:;\" class=\"ellipsis\" :class=\"{active : item.id === sp.selectedProperty}\" @click=\"changeSaleProperty(sp,item.id)\" v-for=\"item in sp.properties\" :key=\"item.id\">{{ item.name }}</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"sub-filter\">\r\n    <xtx-skeleton class=\"item\" width=\"800px\" height=\"40px\"></xtx-skeleton>\r\n    <xtx-skeleton class=\"item\" width=\"800px\" height=\"40px\"></xtx-skeleton>\r\n    <xtx-skeleton class=\"item\" width=\"600px\" height=\"40px\"></xtx-skeleton>\r\n    <xtx-skeleton class=\"item\" width=\"600px\" height=\"40px\"></xtx-skeleton>\r\n    <xtx-skeleton class=\"item\" width=\"600px\" height=\"40px\"></xtx-skeleton>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ref, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { findSubCategoryFilter } from '@/api/category'\r\nimport XtxSkeleton from '@/components/library/xtx-skeleton'\r\n\r\nexport default {\r\n  name: 'SubFilter',\r\n  components: { XtxSkeleton },\r\n  setup (props, { emit }) {\r\n    const filterData = ref(null)\r\n    const filterLoading = ref(false)\r\n    const route = useRoute()\r\n    watch(() => route.params.id, (newVal) => {\r\n      filterLoading.value = true\r\n      // 路由改变重新加载数据\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        findSubCategoryFilter(route.params.id).then(data => {\r\n          data.result.brands.unshift({ id: null, name: '全部' })\r\n          data.result.brands.selectedBrand = null\r\n          data.result.saleProperties.forEach(item => {\r\n            // 被筛选中的属性\r\n            item.selectedProperty = null\r\n            item.properties.unshift({ id: null, name: '全部' })\r\n          })\r\n          filterData.value = data.result\r\n          filterLoading.value = false\r\n        })\r\n      }\r\n    }, { immediate: true })\r\n    // 获取参数\r\n    const getFilterParams = () => {\r\n      const params = {}\r\n      const attrs = []\r\n      params.brandId = filterData.value.brands.selectedBrand\r\n      filterData.value.saleProperties.forEach(item => {\r\n        const attr = item.properties.find(i => i.id === item.selectedProperty)\r\n        if (attr && attr.id) {\r\n          attrs.push({ groupName: item.name, propertyName: attr.name })\r\n        }\r\n      })\r\n      if (attrs.length) params.attrs = attrs\r\n      return params\r\n    }\r\n    // 改变品牌\r\n    const changeBrand = (id) => {\r\n      if (filterData.value.brands.selectedBrand !== id) {\r\n        filterData.value.brands.selectedBrand = id\r\n        emit('filterChange', getFilterParams())\r\n      }\r\n    }\r\n    // 改变筛选属性\r\n    const changeSaleProperty = (sp, id) => {\r\n      if (sp.selectedProperty !== id) {\r\n        sp.selectedProperty = id\r\n        emit('filterChange', getFilterParams())\r\n      }\r\n    }\r\n\r\n    return { filterData, filterLoading, changeBrand, changeSaleProperty }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n// 筛选区\r\n.sub-filter {\r\n  background: #fff;\r\n  padding: 25px;\r\n  .item {\r\n    display: flex;\r\n    line-height: 40px;\r\n    .head {\r\n      width: 80px;\r\n      color: #999;\r\n    }\r\n    .body {\r\n      flex: 1;\r\n      a {\r\n        margin-right: 36px;\r\n        transition: all .3s;\r\n        display: inline-block;\r\n        &.active,\r\n        &:hover {\r\n          color: @xtxColor;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .xtx-skeleton {\r\n    padding: 10px 0;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-filter.vue?vue&type=template&id=8b93149c&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=8b93149c&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\Web\\\\Demo\\\\erabbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8b93149c\"]])\n\nexport default __exports__","<template>\r\n  <div class='sub-sort'>\r\n    <div class=\"sort\">\r\n      <a :class=\"{active : sortParams.sortField === ''}\" @click=\"changeSort('')\" href=\"javascript:;\">默认排序</a>\r\n      <a :class=\"{active : sortParams.sortField === 'publishTime'}\" @click=\"changeSort('publishTime')\" href=\"javascript:;\">最新商品</a>\r\n      <a :class=\"{active : sortParams.sortField === 'orderNum'}\" @click=\"changeSort('orderNum')\" href=\"javascript:;\">最高人气</a>\r\n      <a :class=\"{active : sortParams.sortField === 'evaluateNum'}\" @click=\"changeSort('evaluateNum')\" href=\"javascript:;\">评论最多</a>\r\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\r\n        价格排序\r\n        <i class=\"arrow up\" :class=\"{active : sortParams.sortField === 'price' && sortParams.sortMethod === 'asc'}\" />\r\n        <i class=\"arrow down\" :class=\"{active : sortParams.sortField === 'price' && sortParams.sortMethod === 'desc'}\" />\r\n      </a>\r\n    </div>\r\n    <div class=\"check\">\r\n      <xtx-checkbox v-model=\"sortParams.inventory\">仅显示有货商品</xtx-checkbox>\r\n      <xtx-checkbox v-model=\"sortParams.onlyDiscount\">仅显示特惠商品</xtx-checkbox>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { reactive } from 'vue'\r\nimport XtxCheckbox from '@/components/library/xtx-checkbox'\r\n\r\nexport default {\r\n  name: 'SubSort',\r\n  components: { XtxCheckbox },\r\n  setup (props, { emit }) {\r\n    // 明确交互数据\r\n    const sortParams = reactive({\r\n      inventory: false,\r\n      onlyDiscount: false,\r\n      sortField: '',\r\n      sortMethod: ''\r\n    })\r\n    // 改变排序\r\n    const changeSort = (sortField) => {\r\n      if (sortField === 'price') {\r\n        sortParams.sortField = sortField\r\n        if (sortParams.sortMethod === '') {\r\n          // 第一次点击，默认是降序\r\n          sortParams.sortMethod = 'desc'\r\n        } else if (sortParams.sortMethod === 'asc') {\r\n          sortParams.sortMethod = 'desc'\r\n        } else {\r\n          sortParams.sortMethod = 'asc'\r\n        }\r\n      } else {\r\n        // 如果排序未改变停止逻辑\r\n        if (sortParams.sortField === sortField) return\r\n        sortParams.sortField = sortField\r\n        sortParams.sortMethod = ''\r\n      }\r\n      emit('sortChange', sortParams)\r\n    }\r\n    return { sortParams, changeSort }\r\n  }\r\n\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n.sub-sort {\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .sort {\r\n    display: flex;\r\n    a {\r\n      height: 30px;\r\n      line-height: 28px;\r\n      border: 1px solid #e4e4e4;\r\n      padding: 0 20px;\r\n      margin-right: 20px;\r\n      color: #999;\r\n      border-radius: 2px;\r\n      position: relative;\r\n      transition: all .3s;\r\n      &.active {\r\n        background: @xtxColor;\r\n        border-color: @xtxColor;\r\n        color: #fff;\r\n      }\r\n      .arrow {\r\n        position: absolute;\r\n        border: 5px solid transparent;\r\n        right: 8px;\r\n        &.up {\r\n          top: 3px;\r\n          border-bottom-color: #bbb;\r\n          &.active {\r\n            border-bottom-color: @xtxColor;\r\n          }\r\n        }\r\n        &.down {\r\n          top: 15px;\r\n          border-top-color: #bbb;\r\n          &.active {\r\n            border-top-color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .check {\r\n    .xtx-checkbox {\r\n      margin-left: 20px;\r\n      color: #999;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-sort.vue?vue&type=template&id=796913b9&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=796913b9&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\Web\\\\Demo\\\\erabbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-796913b9\"]])\n\nexport default __exports__","import { render } from \"./sub.vue?vue&type=template&id=24cde1f8&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=24cde1f8&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\Web\\\\Demo\\\\erabbit-client-pc\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24cde1f8\"]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_RouterLink","to","$props","id","_createElementVNode","src","picture","alt","_toDisplayString","name","desc","price","props","goods","type","Object","default","__exports__","render","_createElementBlock","_createVNode","_component_sub_bread","_component_sub_filter","onFilterChange","$setup","_component_sub_sort","onSortChange","_Fragment","_renderList","key","_component_goods_item","_component_xtx_infinite_loading","loading","finished","onLoadData","_component_xtx_bread","_component_xtx_bread_item","top","_Transition","mode","sub","components","XtxBreadItem","setup","store","useStore","route","useRoute","category","computed","i","state","list","length","children","find","item","params","_hoisted_3","brands","brand","href","active","selectedBrand","onClick","_hoisted_5","saleProperties","sp","properties","selectedProperty","_hoisted_8","_component_xtx_skeleton","width","height","XtxSkeleton","emit","filterData","ref","filterLoading","watch","newVal","value","path","findSubCategoryFilter","then","data","result","unshift","forEach","immediate","getFilterParams","attrs","brandId","attr","push","groupName","propertyName","changeBrand","changeSaleProperty","sortField","sortMethod","_component_xtx_checkbox","inventory","$event","onlyDiscount","XtxCheckbox","sortParams","reactive","changeSort","SubBread","SubFilter","SubSort","GoodsItem","page","pageSize","goodsList","loadData","categoryId","findSubCategoryGoods","items","filterChange","filterParams","sortChange"],"sourceRoot":""}